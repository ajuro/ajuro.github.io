<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="AjuroImageManager.js"></script>
	<script src="https://use.fontawesome.com/526b5971ba.js"></script>
	<link rel="stylesheet" type="text/css" href="AjuroImageManager.css">
</head>
<body onresize="WindowResized()">
<center><div>
<table class='up' cellspacing="0" cellpadding="5">
			<tr>
				<td width='50'>
					<i class="fa fa-arrows-alt fa-3x page_control" aria-hidden="true"></i>
				</td>
				<td  rowspan=2>
					<div id='title' class='title'>Ajuro</div>
				</td>
				<td>
				</td>
				<td width='80'>
					<i class="fa fa-sliders fa-3x page_control" aria-hidden="true"></i>
				</td>
			</tr>
			<tr>
				<td height='30px'>
				</td>
			</tr>
			<tr>
				<td colspan=4>
					<table style='width: auto'>
						<tr>
							<td>
								<span class="fa-stack fa-3x">
									<!--i class="fa fa-circle-o-notch fa-spin fa-stack-1x fa-fw"></i-->
									<strong class="fa-stack-1x calendar-text">
										<a href="https://example.com" class="round-button facebook"><img width='60' height='60' src='https://cdn1.iconfinder.com/data/icons/social-media-icon-1/112/facebook-128.png' title='Facebook'></a>
									</strong>
									</span>
							</td>
							<td class='soc'>
								<span class="fa-stack fa-3x">
									<!--i class="fa fa-circle-o-notch fa-spin fa-stack-1x fa-fw"></i-->
								<strong class="fa-stack-1x">
										<a href="https://example.com" class="round-button"><img width='60' height='60' src='https://cdn1.iconfinder.com/data/icons/logotypes/32/pinterest-128.png' title='Pinterest'></a>
									</strong>
									</span>
							</td>
							<td>
								<span class="fa-stack fa-3x">
									<!--i class="fa fa-circle-o-notch fa-spin fa-stack-1x fa-fw"></i-->
								<strong class="fa-stack-1x">
										<a href="https://example.com" class="round-button"><img width='60' height='60' src='https://cdn4.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-linkedin-circle-128.png' title='LinkdIn'></a>
									</strong>
									</span>
							</td>
							<td>
								<span class="fa-stack fa-3x">
									<!--i class="fa fa-circle-o-notch fa-spin fa-stack-1x fa-fw"></i-->
								<strong class="fa-stack-1x">
										<a href="https://example.com" class="round-button"><img width='60' height='60' src='https://cdn4.iconfinder.com/data/icons/miu-black-social-2/60/twitter-128.png' title='Twitter'></a>
									</strong>
									</span>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
		<div class='separator top'>&nbsp;</div>
		<div id='main_div'>
			<table id='main_table' cellspacing="0" cellpadding="5"></table>
		</div>
		<div class='separator bottom'>&nbsp;</div>
		<table  class='down' cellspacing="0" cellpadding="5">
			<tr>
				<td width='80'>
					<i class="action_button fa fa-home  fa-3x" aria-hidden="true"></i>
				</td>
				<td>
				</td>
				<td width='80'>
					<i class="action_button fa fa-heart  fa-3x" aria-hidden="true"></i>
				</td>
				<td>
				</td>
				<td width='80'>
					<i class="action_button fa fa-chevron-circle-right  fa-3x" aria-hidden="true"></i>
				</td>
			</tr>
		</table></div>
		</center>
<script>
var readUlr = 'https://aju.ro/api/index.php'; // GET example ?read=product&take=10&skip=0
var data = null;
var nrOfCols = 3;
var marginRight = 20;
var dpi_x = 96;
var dpi_y = 96;

function GetLasts(entity){
    return($.ajax({
		url: readUlr,
		type: 'GET',
		dataType: 'json',
		data: { read: entity, take: 100, skip: 0 }
	}));
}

var delegate = GetLasts('image');
delegate.success(function (response) 
{
	ComputeDPI();
	$('#title').html($('#title').html()+' '+dpi_x);
	marginRight*=dpi_x/96
	$('#received_json').html(JSON.stringify(response,null,'\t').replace(/\n/g,'<br>').replace(/\t/g,'&nbsp;&nbsp;&nbsp;'));
	data = response.result;
	nrOfCols = Math.round((window.outerWidth-marginRight)/130*dpi_x/96)-1;
	$('#main_div').height(window.outerHeight-430);
	CreateTable();
	$('.thumbnail').height(130*dpi_y/96);
	$('.thumbnail').width(130*dpi_x/96);
}).error(function(xhr, error){
    //alert( "Error: " + xhr.statusText );
});

function ComputeDPI(){
	var div = document.createElement("div");
	div.style.width="1in";
	div.style.height="1in";
	var body = document.getElementsByTagName("body")[0];
	body.appendChild(div);
	var devicePixelRatio = window.devicePixelRatio || 1;
	dpi_x = document.defaultView.getComputedStyle(div, null).getPropertyValue('width');
	dpi_y = document.defaultView.getComputedStyle(div, null).getPropertyValue('height');
	if(dpi_x.indexOf('px')>0)
	{
		dpi_x = dpi_x.substring(0, dpi_x.length-2);
	}
	if(dpi_y.indexOf('px')>0)
	{
		dpi_y = dpi_y.substring(0, dpi_y.length-2);
	}
	body.removeChild(div);
}

function CreateTable()
{
	var contentHTML = '';
	for(i=100; i>0; i--)
	{
		if(((100-i)%nrOfCols) == 0)
		{
			contentHTML += "			</tr>\n			<tr>\n";
		}
		contentHTML += "				<td>\n					<img class='thumbnail' src='https://aju.ro/img/logo.png'>\n				</td>\n";
	}
	$('#main_table').html(contentHTML.substring(9));
}

function WindowResized()
{
    var w = window.outerWidth;
    var h = window.outerHeight;
	$('#main_div').height(h-430);
	if((Math.round((w-marginRight)/130*dpi_x/96)-1) != nrOfCols)
	{
		nrOfCols = Math.round((w-marginRight)/130*dpi_x/96)-1;
		CreateTable();
	}
}
</script>